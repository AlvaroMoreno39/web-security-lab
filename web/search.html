<!DOCTYPE html>
<html>

<head>
  <meta charset="utf-8" />
  <title>User Search</title>
</head>

<body>
  <h1>User search (API + JS)</h1>

  <input id="q" type="text" placeholder="Type a username fragment (e.g., ad)" />
  <button id="btn">Search</button>

  <div id="out"></div>

  <script>
    const input = document.getElementById("q");
    const btn = document.getElementById("btn");
    const out = document.getElementById("out");

    async function search() {
      const q = input.value;

      // Call your API endpoint
      const res = await fetch(`/api/search_user.php?q=${encodeURIComponent(q)}`);
      const data = await res.json();

      out.innerHTML = "";

      // Show the query safely
      const p = document.createElement("p");
      p.textContent = `You searched for: ${q}`;
      out.appendChild(p);

      // Show results safely
      data.results.forEach(u => {
        const userP = document.createElement("p");
        userP.textContent = `User: ${u.username}`;
        out.appendChild(userP);
      });


    }

    btn.addEventListener("click", search);
  </script>
</body>

</html>